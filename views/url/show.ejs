<% layout('layouts/boilerplate')%>

    <div class=" border-secondary border-4 w-[80%]  lg:w-[70%]  c-transition ">
        <div class="py-3 md:px-6">
            <div class="show-url text-secondary c-transition  max-w-4xl mx-auto px-6 my-6">
                <h1 class="text-2xl md:text-3xl text-secondary text-center drop-shadow-lg c-transition font-bold m-5 ">
                    Link Info</h1>

                <div class="relative flex items-center mx-auto my-10 shadow-[0_4px_12px_-5px] shadow-secondary">
                    <label
                        class="text-md bg-textMuted text-secondary absolute px-2 top-[-20px] left-[18px] shadow-[0_4px_12px_-5px] shadow-secondary">Destination
                        Link</label>
                    <input type="text" disabled class="edit-url-input" value="<%= existingUrl.originalUrl %>" />
                    <% if (currentUser && `${(existingUrl.author._id)}`.includes(currentUser._id)){ %>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4 absolute right-4 edit-url cursor-pointer">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
                        </svg>
                        <% } %>
                </div>
                <div class="relative flex items-center mx-auto my-10 shadow-[0_4px_12px_-5px] shadow-secondary">
                    <label
                        class="text-md bg-textMuted text-secondary absolute px-2 top-[-20px] left-[18px] shadow-[0_4px_12px_-5px] shadow-secondary">Short
                        Link</label>
                    <input type="text" disabled class="copy edit-url-input" value="<%= existingUrl.shortenedUrl %>" />
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                        class="size-4 absolute right-4 cursor-pointer" id="copy-btn">
                        <path fill-rule="evenodd"
                            d="M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z"
                            clip-rule="evenodd" />
                        <path fill-rule="evenodd"
                            d="M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
            </div>

            <form class="hidden edit-url-form text-secondary c-transition  max-w-4xl mx-auto px-6 my-6"
                action="/<%= existingUrl._id %>?_method=PUT" method="POST">

                <h1 class="text-2xl md:text-3xl text-secondary text-center drop-shadow-lg c-transition font-bold m-5 ">
                    Edit Link</h1>

                <div class="relative flex items-center mx-auto my-10 shadow-[0_4px_12px_-5px] shadow-secondary">
                    <label
                        class="text-md bg-textMuted text-secondary absolute px-2 top-[-20px] left-[18px] shadow-[0_4px_12px_-5px] shadow-secondary">Destination
                        Link</label>
                    <input type="text" id="d-link" class="edit-url-input" value="<%= existingUrl.originalUrl %>"
                        name="destinationUrl" />
                    <% if (currentUser && `${(existingUrl.author._id)}`.includes(currentUser._id)){ %>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" id="delete-value" class="size-4 absolute right-4 cursor-pointer">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                        </svg>
                        <% } %>
                </div>
                <div class="relative flex items-center mx-auto my-10 shadow-[0_4px_12px_-5px] shadow-secondary">
                    <label
                        class="text-md bg-textMuted text-secondary absolute px-2 top-[-20px] left-[18px] shadow-[0_4px_12px_-5px] shadow-secondary">Short
                        Link</label>
                    <input type="text" disabled name="shortenedUrl" class="edit-url-input"
                        value="<%= existingUrl.shortenedUrl %>" />
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                        class="size-4 absolute right-4 copy-btn cursor-pointer">
                        <path fill-rule="evenodd"
                            d="M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z"
                            clip-rule="evenodd" />
                        <path fill-rule="evenodd"
                            d="M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="inline-flex justify-center w-full rounded-md shadow-xs" role="group">
                    <button type="submit" class="edit-url-button rounded-s-lg">
                        Submit
                    </button>
                    <button type="button" id="cancel-edit" class="edit-url-button rounded-e-lg">
                        Cancel
                    </button>
                </div>

            </form>
        </div>
        <div
            class="bg-gray-100 border-t rounded-b-xl py-3 px-4 md:py-4 md:px-5 dark:bg-neutral-900 dark:border-neutral-700">
            <% if (existingUrl.author){%>
                <p class="mt-1 text-sm text-gray-500 dark:text-neutral-500"><span class="font-semibold">Author:</span>
                    <% if (currentUser && `${(existingUrl.author._id)}`.includes(currentUser._id)){ %>
                        You
                        <% } else{ %>
                            <%= existingUrl.author.username%>
                                <% } %>
                </p>
                <% }%>
                    <p class="mt-1 text-sm text-gray-500 dark:text-neutral-500"><span class="font-semibold">Created
                            At:</span>
                        <%= existingUrl.createdAt.toLocaleDateString("en-US", { weekday: 'long' , year: 'numeric' ,
                            month: 'long' , day: 'numeric' }) %>
                    </p>
        </div>
    </div>

    <script src="/javascript/copy.js"></script>